CREATE DATABASE CRUD;
USE CRUD;

CREATE TABLE PROFILE_ (
USERNAME VARCHAR(40) PRIMARY KEY,
PASSWORD_ VARCHAR(40),
EMAIL VARCHAR(40) UNIQUE ,
USER_CODE INT AUTO_INCREMENT UNIQUE,
NAME_ VARCHAR(40),
TELEPHONE VARCHAR(9),
CONSTRAINT CHK_TELEPHONE
        CHECK (TELEPHONE REGEXP '^[0-9]{9}$'),
SURNAME VARCHAR(40)
);

CREATE TABLE USER_ (
USERNAME VARCHAR(40) PRIMARY KEY,
GENDER VARCHAR(40),
CARD_NUMBER VARCHAR(24),
CONSTRAINT CHK_CARD_NUMBER
        CHECK (CARD_NUMBER REGEXP '^[A-Z]{2}[0-9]{22}$'),
FOREIGN KEY (USERNAME) REFERENCES PROFILE_ (USERNAME)
);

CREATE TABLE ADMIN_ (
USERNAME VARCHAR(40) PRIMARY KEY,
CURRENT_ACCOUNT VARCHAR(40),
FOREIGN KEY (USERNAME) REFERENCES PROFILE_ (USERNAME)
);

INSERT INTO PROFILE_ (USERNAME, PASSWORD_, EMAIL, USER_CODE, NAME_, TELEPHONE, SURNAME)
VALUES
('jlopez', 'pass123', 'jlopez@example.com', 101, 'Juan', '987654321', 'Lopez'),
('mramirez', 'pass456', 'mramirez@example.com', 102, 'Maria', '912345678', 'Ramirez'),
('cperez', 'pass789', 'cperez@example.com', 103, 'Carlos', '934567890', 'Perez'),
('asanchez', 'qwerty', 'asanchez@example.com', 104, 'Ana', '900112233', 'Sanchez'),
('rluna', 'zxcvbn', 'rluna@example.com', 105, 'Rosa', '955667788', 'Luna');

INSERT INTO USER_ (USERNAME, GENDER, CARD_NUMBER)
VALUES
('jlopez', 'Masculino', 'AB1234567890123456789012'),
('mramirez', 'Femenino', 'ZX9081726354891027364512'),
('cperez', 'Masculino', 'LM0011223344556677889900');

INSERT INTO ADMIN_ (USERNAME, CURRENT_ACCOUNT)
VALUES
('asanchez', 'CTA-001'),
('rluna', 'CTA-002');